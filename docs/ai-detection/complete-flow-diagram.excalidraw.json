{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "type": "rectangle",
      "id": "camera",
      "x": 100,
      "y": 100,
      "width": 150,
      "height": 80,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "backgroundColor": "#e7f5ff",
      "label": {
        "text": "ðŸ“¹ Camera RTSP\nAlta DefiniÃ§Ã£o\n10-20 por cidade",
        "fontSize": 16
      }
    },
    {
      "type": "rectangle",
      "id": "mediamtx",
      "x": 100,
      "y": 250,
      "width": 150,
      "height": 100,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "backgroundColor": "#fff3bf",
      "label": {
        "text": "ðŸŽ¬ MediaMTX\nHub Central\nPorta 8889/8888",
        "fontSize": 16
      }
    },
    {
      "type": "rectangle",
      "id": "webrtc",
      "x": 50,
      "y": 420,
      "width": 120,
      "height": 80,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "backgroundColor": "#d3f9d8",
      "label": {
        "text": "WebRTC\nIA Detection\n<500ms",
        "fontSize": 14
      }
    },
    {
      "type": "rectangle",
      "id": "hls",
      "x": 200,
      "y": 420,
      "width": 120,
      "height": 80,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "backgroundColor": "#ffe3e3",
      "label": {
        "text": "HLS\nUsuÃ¡rios\n10-30s",
        "fontSize": 14
      }
    },
    {
      "type": "rectangle",
      "id": "ai_detection",
      "x": 50,
      "y": 570,
      "width": 120,
      "height": 400,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "backgroundColor": "#f3f0ff",
      "label": {
        "text": "ðŸ¤– AI Detection\n\n1. Frame Extract (3 FPS)\n2. Motion (drop 70%)\n3. Vehicle YOLO\n4. Tracking (IoU)\n5. Quality Score\n6. Plate YOLO\n7. OCR (Fast-Plate)\n8. Consensus (â‰¥60%)\n9. Dedup (Redis)\n10. RabbitMQ",
        "fontSize": 12
      }
    },
    {
      "type": "rectangle",
      "id": "frontend",
      "x": 200,
      "y": 570,
      "width": 120,
      "height": 80,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "backgroundColor": "#fff9db",
      "label": {
        "text": "ðŸŽ¨ Frontend\nReact\nHLS Player",
        "fontSize": 14
      }
    },
    {
      "type": "rectangle",
      "id": "rabbitmq",
      "x": 400,
      "y": 700,
      "width": 120,
      "height": 80,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "backgroundColor": "#ffd8a8",
      "label": {
        "text": "ðŸ“¨ RabbitMQ\nvms.detections\nExchange",
        "fontSize": 14
      }
    },
    {
      "type": "rectangle",
      "id": "backend",
      "x": 400,
      "y": 850,
      "width": 120,
      "height": 120,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "backgroundColor": "#d0f4de",
      "label": {
        "text": "ðŸ”§ Backend\nDjango\nConsumer\nWebSocket",
        "fontSize": 14
      }
    },
    {
      "type": "rectangle",
      "id": "frontend_detections",
      "x": 600,
      "y": 850,
      "width": 120,
      "height": 80,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "backgroundColor": "#fff9db",
      "label": {
        "text": "ðŸŽ¨ Frontend\nDetecÃ§Ãµes\nTempo Real",
        "fontSize": 14
      }
    },
    {
      "type": "arrow",
      "id": "arrow1",
      "x": 175,
      "y": 180,
      "width": 0,
      "height": 70,
      "strokeWidth": 2,
      "label": {
        "text": "RTSP",
        "fontSize": 12
      }
    },
    {
      "type": "arrow",
      "id": "arrow2",
      "x": 110,
      "y": 350,
      "width": 0,
      "height": 70,
      "strokeWidth": 2,
      "label": {
        "text": "WebRTC\n1-3 FPS",
        "fontSize": 12
      }
    },
    {
      "type": "arrow",
      "id": "arrow3",
      "x": 260,
      "y": 350,
      "width": 0,
      "height": 70,
      "strokeWidth": 2,
      "label": {
        "text": "HLS\n30 FPS",
        "fontSize": 12
      }
    },
    {
      "type": "arrow",
      "id": "arrow4",
      "x": 110,
      "y": 500,
      "width": 0,
      "height": 70,
      "strokeWidth": 2,
      "label": {
        "text": "Frames",
        "fontSize": 12
      }
    },
    {
      "type": "arrow",
      "id": "arrow5",
      "x": 260,
      "y": 500,
      "width": 0,
      "height": 70,
      "strokeWidth": 2,
      "label": {
        "text": "Stream",
        "fontSize": 12
      }
    },
    {
      "type": "arrow",
      "id": "arrow6",
      "x": 170,
      "y": 800,
      "width": 230,
      "height": -100,
      "strokeWidth": 2,
      "label": {
        "text": "DetecÃ§Ã£o\nJSON",
        "fontSize": 12
      }
    },
    {
      "type": "arrow",
      "id": "arrow7",
      "x": 460,
      "y": 780,
      "width": 0,
      "height": 70,
      "strokeWidth": 2,
      "label": {
        "text": "Consume",
        "fontSize": 12
      }
    },
    {
      "type": "arrow",
      "id": "arrow8",
      "x": 520,
      "y": 890,
      "width": 80,
      "height": 0,
      "strokeWidth": 2,
      "label": {
        "text": "WebSocket\nws://",
        "fontSize": 12
      }
    },
    {
      "type": "text",
      "id": "title",
      "x": 100,
      "y": 30,
      "width": 600,
      "height": 40,
      "fontSize": 28,
      "fontFamily": 1,
      "text": "ðŸŽ¯ VMS - Fluxo Completo: Streaming + AI Detection",
      "textAlign": "center"
    },
    {
      "type": "rectangle",
      "id": "legend",
      "x": 750,
      "y": 100,
      "width": 250,
      "height": 400,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "dashed",
      "roughness": 1,
      "opacity": 100,
      "backgroundColor": "#ffffff",
      "label": {
        "text": "ðŸ“Š MÃ‰TRICAS\n\nðŸŽ¥ Streaming:\nâ€¢ HLS: 10-30s latÃªncia\nâ€¢ WebRTC: <500ms\nâ€¢ NÃ£o interferem\n\nðŸ¤– AI Detection:\nâ€¢ Input: 30 FPS\nâ€¢ Processado: 0.45 FPS\nâ€¢ Drop: 98.5%\nâ€¢ PrecisÃ£o: >95%\n\nâš¡ Performance:\nâ€¢ CPU: ~60% por cÃ¢mera\nâ€¢ RAM: ~250MB\nâ€¢ LatÃªncia: <1s\n\nðŸ’° Economia:\nâ€¢ Banda: 99%\nâ€¢ CPU: 95%\nâ€¢ Total: $531k/mÃªs",
        "fontSize": 12
      }
    },
    {
      "type": "rectangle",
      "id": "models",
      "x": 750,
      "y": 550,
      "width": 250,
      "height": 200,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "dashed",
      "roughness": 1,
      "opacity": 100,
      "backgroundColor": "#e7f5ff",
      "label": {
        "text": "ðŸ¤– MODELOS IA\n\nVehicle Detection:\nâ€¢ yolov8n (6MB)\nâ€¢ COCO dataset\nâ€¢ Classes: car/truck/bus\n\nPlate Detection:\nâ€¢ plate_yolov8n (6MB)\nâ€¢ FINE-TUNED â­\nâ€¢ 10k+ placas\nâ€¢ PrecisÃ£o: 90-95%\n\nOCR:\nâ€¢ Fast-Plate-OCR\nâ€¢ ONNX runtime\nâ€¢ CPU-optimized",
        "fontSize": 11
      }
    },
    {
      "type": "rectangle",
      "id": "flow_detail",
      "x": 750,
      "y": 800,
      "width": 250,
      "height": 170,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "dashed",
      "roughness": 1,
      "opacity": 100,
      "backgroundColor": "#d3f9d8",
      "label": {
        "text": "ðŸ”„ FLUXO DETECÃ‡ÃƒO\n\n1. CÃ¢mera â†’ MediaMTX\n2. WebRTC â†’ AI (3 FPS)\n3. Motion â†’ Drop 70%\n4. YOLO â†’ VeÃ­culos\n5. Track â†’ 10-30 frames\n6. Score â†’ Melhor frame\n7. YOLO â†’ Placa\n8. OCR â†’ 3-5 leituras\n9. Consenso â†’ â‰¥60%\n10. Redis â†’ Dedup 5min\n11. RabbitMQ â†’ Backend\n12. WebSocket â†’ Frontend",
        "fontSize": 10
      }
    }
  ],
  "appState": {
    "viewBackgroundColor": "#ffffff",
    "gridSize": 20
  }
}
